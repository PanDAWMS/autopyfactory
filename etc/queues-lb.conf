[DEFAULT]
cleanlogs.keepdays = 7
apfqueue.sleep = 360

# plugins
batchstatusplugin = Condor
wmsstatusplugin = Panda
batchsubmitplugin = CondorOSGCE
schedplugin = Ready 
#monitorsection = apfmon-lancaster
monitorsection = dummy-monitor

sched.trivial.default = 0
sched.simple.default = 0
sched.activated.default = 0
# defaults for testmode
sched.activated.testmode.allowed = True
sched.activated.testmode.pilots = 5

# proxy = atlas-usatlas
batchsubmit.condorosgce.proxy = None
batchsubmit.condorcream.proxy = None
batchsubmit.condorec2.proxy = None
batchsubmit.condorec2.peaceful = True
batchsubmit.condorlocal.proxy = None

#
# load balancing related
#
childlist = None
minpending = 2
maxtransfer = 5
batchplugin = None
isroot=False
wmsplugin = None
minfullpending = 2

# condor batch submit vars
batchsubmit.condorosgce.condor_attributes = periodic_remove = (JobStatus == 2 && (CurrentTime - EnteredCurrentStatus) > 604800)
periodic_hold = periodic_hold=GlobusResourceUnavailableTime =!= UNDEFINED &&(CurrentTime-GlobusResourceUnavailableTime>30)
periodic_remove = periodic_remove=(JobStatus == 5 && (CurrentTime - EnteredCurrentStatus) > 3600) || (JobStatus == 1 && globusstatus =!= 1 && (CurrentTime - EnteredCurrentStatus) > 86400) || (JobStatus == 2 && (CurrentTime - EnteredCurrentStatus) > 604800)
batchsubmit.condorgt2.condor_attributes = %(periodic_hold)s,%(periodic_remove)s 

# The following are valid for wrapper.sh
executable = /usr/libexec/wrapper.sh
grid=OSG
vo=ATLAS
executable.defaultarguments = --wrappergrid=%(grid)s --wrapperwmsqueue=%(wmsqueue)s --wrapperbatchqueue=%(batchqueue)s --wrappervo=%(vo)s --wrappertarballurl=http://dev.racf.bnl.gov/dist/wrapper/wrapper.tar.gz --wrapperserverurl=http://pandaserver.cern.ch:25080/cache/pilot --wrapperloglevel=debug


[ANALY_BNL_SHORT]
klass = LBQueue
isroot = True
childlist = ANALY_BNL_SHORT-gridgk01.racf.bnl.gov, ANALY_BNL_SHORT-gridgk02.racf.bnl.gov, ANALY_BNL_SHORT-gridgk03.racf.bnl.gov,ANALY_BNL_SHORT-gridgk04.racf.bnl.gov,ANALY_BNL_SHORT-gridgk06.racf.bnl.gov,ANALY_BNL_SHORT-gridgk07.racf.bnl.gov, 


[ANALY_BNL_SHORT-gridgk01.racf.bnl.gov]
klass = APFSubmitQueue
batchqueue = ANALY_BNL_SHORT-condor

batchsubmit.condorosgce.condor_attributes.+maxMemory = 3000
batchsubmit.condorosgce.condor_attributes.+maxWallTime = 240
batchsubmit.condorosgce.condor_attributes.+remote_queue = "analy.short"
batchsubmit.condorosgce.condor_attributes.+voactivity = "analysis"
batchsubmit.condorosgce.condor_attributes.+xcount = 1
batchsubmit.condorosgce.gridresource = gridgk01.racf.bnl.gov
batchsubmitplugin = CondorOSGCE
enabled = True
sched.scale.factor = 0.0277777777778
wmsqueue = ANALY_BNL_SHORT



[ANALY_BNL_SHORT-gridgk02.racf.bnl.gov]
batchqueue = ANALY_BNL_SHORT-condor
batchsubmit.condorosgce.condor_attributes.+maxMemory = 3000
batchsubmit.condorosgce.condor_attributes.+maxWallTime = 240
batchsubmit.condorosgce.condor_attributes.+remote_queue = "analy.short"
batchsubmit.condorosgce.condor_attributes.+voactivity = "analysis"
batchsubmit.condorosgce.condor_attributes.+xcount = 1
batchsubmit.condorosgce.gridresource = gridgk02.racf.bnl.gov
batchsubmitplugin = CondorOSGCE
enabled = True
sched.scale.factor = 0.0277777777778
wmsqueue = ANALY_BNL_SHORT


[ANALY_BNL_SHORT-gridgk03.racf.bnl.gov]
batchqueue = ANALY_BNL_SHORT-condor
batchsubmit.condorosgce.condor_attributes.+maxMemory = 3000
batchsubmit.condorosgce.condor_attributes.+maxWallTime = 240
batchsubmit.condorosgce.condor_attributes.+remote_queue = "analy.short"
batchsubmit.condorosgce.condor_attributes.+voactivity = "analysis"
batchsubmit.condorosgce.condor_attributes.+xcount = 1
batchsubmit.condorosgce.gridresource = gridgk03.racf.bnl.gov
batchsubmitplugin = CondorOSGCE
enabled = True
sched.scale.factor = 0.0277777777778
wmsqueue = ANALY_BNL_SHORT


[ANALY_BNL_SHORT-gridgk04.racf.bnl.gov]
batchqueue = ANALY_BNL_SHORT-condor
batchsubmit.condorosgce.condor_attributes.+maxMemory = 3000
batchsubmit.condorosgce.condor_attributes.+maxWallTime = 240
batchsubmit.condorosgce.condor_attributes.+remote_queue = "analy.short"
batchsubmit.condorosgce.condor_attributes.+voactivity = "analysis"
batchsubmit.condorosgce.condor_attributes.+xcount = 1
batchsubmit.condorosgce.gridresource = gridgk04.racf.bnl.gov
batchsubmitplugin = CondorOSGCE
enabled = True
sched.scale.factor = 0.0277777777778
wmsqueue = ANALY_BNL_SHORT

[ANALY_BNL_SHORT-gridgk06.racf.bnl.gov]
batchqueue = ANALY_BNL_SHORT-condor
batchsubmit.condorosgce.condor_attributes.+maxMemory = 3000
batchsubmit.condorosgce.condor_attributes.+maxWallTime = 240
batchsubmit.condorosgce.condor_attributes.+remote_queue = "analy.short"
batchsubmit.condorosgce.condor_attributes.+voactivity = "analysis"
batchsubmit.condorosgce.condor_attributes.+xcount = 1
batchsubmit.condorosgce.gridresource = gridgk06.racf.bnl.gov
batchsubmitplugin = CondorOSGCE
enabled = True
sched.scale.factor = 0.0277777777778
wmsqueue = ANALY_BNL_SHORT


[ANALY_BNL_SHORT-gridgk07.racf.bnl.gov]
batchqueue = ANALY_BNL_SHORT-condor
batchsubmit.condorosgce.condor_attributes.+maxMemory = 3000
batchsubmit.condorosgce.condor_attributes.+maxWallTime = 240
batchsubmit.condorosgce.condor_attributes.+remote_queue = "analy.short"
batchsubmit.condorosgce.condor_attributes.+voactivity = "analysis"
batchsubmit.condorosgce.condor_attributes.+xcount = 1
batchsubmit.condorosgce.gridresource = gridgk07.racf.bnl.gov
batchsubmitplugin = CondorOSGCE
enabled = True
sched.scale.factor = 0.0277777777778
wmsqueue = ANALY_BNL_SHORT







#[lbnode1]
#klass = LBQueue
#childlist = subC, subD
#
#[ofnode1]
#klass = OFQueue
#childlist = subA, subB
#
#[subA]
#klass = SubmitQueue
#batchplugin = MockBatchPlugin
#mock=max5
#[subB]
#klass = SubmitQueue
#batchplugin = MockBatchPlugin
#mock=max10

#[subC]
#klass = SubmitQueue
#batchplugin = MockBatchPlugin
#mock=max10

#[subD]
#klass = SubmitQueue
#batchplugin = MockBatchPlugin
#mock=max20

#[subE]
#klass = SubmitQueue
#batchplugin = MockBatchPlugin
#mock=max30
