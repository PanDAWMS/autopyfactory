# format-free (for the time being) 
# to start putting together content for a future
# apf puppet module




class autopyfactory{

    # create, if needed, UNIX account 'autopyfactory'
    user {'autopyfactory':
      ensure     => present,
      comment    => 'service account for AutoPyFactory',
      home       => '/home/autopyfactory',
      managehome => true,
    }

    # installation
    package {'autopyfactory':
        ensure => installed,
        require => Package['condor'],
    }
    
    # service
    service { 'autopyfactory':
        ensure  => running,
        require => Package['autopyfactory'],
        require => User['autopyfactory'],
        require => File['/etc/autopyfactory/queues.conf'],

    # APF config files
    file {'/etc/autopyfactory/queues.conf':
        source => blah blah
        notify => Service['autopyfactory'],
    }

}


class condor{

    package{'condor':
        ensure => installed,
    }

    service {'condor':
        ensure => running,
        require => Package['condor'],
        require => File['/etc/condor/config.d/99autopyfactory.conf'],

    # APF-specific config files
    file {'/etc/condor/config.d/99autopyfactory.conf':
        source => blah blah
        notify => Service['condor'],
    }
}
